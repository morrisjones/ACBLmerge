<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>ACBLmerge Info</title>
<style type="text/css">
body {
	color: black;
	background-color: #F8F8DD;
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
	margin: 0pt;
}

li { margin-top: 1em }

div#content {
	margin-top: 1em;
	margin-bottom: 2em;
	margin-left: 2em;
	margin-right: 2em;
   
	min-width: 2in;
	max-width: 7.5in;
}
.red { color: red; }
.blue { color: blue; }
.green { color: green; }
.orange { color: #A07000; }

.boxed { border-style: solid; border-width: 1px; }
.inlinecode { font-family: courier, monospace; }
.requiredfile { color: blue; }
table.center {margin-left:auto; margin-right:auto;}

table#top_table td { vertical-align: top; }
table#revhist { border-spacing: 1em 0.5em; }
table#revhist td { vertical-align: top; }
table#revhist thead { font-weight: bold; } 
table#filelist { border: 1px solid black; border-collapse: collapse; }
table#filelist thead { font-weight: bold; }
table#filelist td { border: 1px dotted #666; padding-left: 0.5em; padding-right: 0.5em; }
table#filelist .newgroup td { border-top: double; }
table#fileexts { border: 1px solid black; border-collapse: collapse; }
table#fileexts thead { font-weight: bold; }
table#fileexts td { border: 1px dotted #666; padding-left: 0.5em; padding-right: 0.5em; }

table.json thead { font-weight: bold; }
table.json { border: 1px solid black; border-collapse: collapse; margin-left: 3em; }
table.json td { vertical-align: top; }
table.json td { border: 1px dotted #666; padding-left: 0.5em; padding-right: 0.5em; }

#dlbutton {
  float: right;
  margin-right: 1em;
  margin-top: 0.2em;
  margin-bottom: 0.5em;
  margin-left: 1em;
  background: #3999e8;
  color: white;
  display: inline-block;
  padding: 3px 8px 6px 8px;
  font-size: 14px;
  font-weight: bold;
}

#dlbutton img { float: left; padding: 4px 0 0 0; margin-right: 4px; border: 0; }
#dlbutton a:link, #dlbutton a:visited { text-decoration: none; color: #f0f0f0; }

</style>
</head>

<body>
<div id="content">

<table id="top_table"><tr>
<td><img src="ACBLmergeLogo.png" width="146" height="90" alt="ACBLmerge Logo" align="left" style= "margin-top: 0.5em; margin-right: 1em;"></td>
<td>
  <h1 style="margin-top: 0em; margin-bottom: 0em;">ACBLmerge</h1>

  <p style="color: blue; margin-bottom: 0em;">ACBLmerge is a free (open source) program to merge hand records, double dummy results, and electronic scoring info with ACBLscore output, creating an HTML report for websites.</p>
</td>
</tr></table>

<div id="dlbutton">
<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge135.zip">
<img alt="&dArr;" src="download.png" width="23" height="26"></a> <span style="line-height: 30px;"><a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge135.zip">Download Now</a></span>
</div>

<h2>Overview</h2>

<p>The <a href="http://www.acbl.org/clubs_page/acblscore/">ACBLscore</a> program provided by the American Contract Bridge League (<a href="http://acbl.org">ACBL</a>) is a <a href="http://www.acblscoreplus.com/?page_id=8">very old program</a>. It was originally written for DOS, initially in PL/I and converted to Pascal shortly thereafter. It has been minimally ported from DOS to Windows. ACBLscore can generate many text based reports which were originally designed for fixed-width dot matrix printers. The same reports can also be generated in an HTML format. But the HTML generated by ACBLscore is an extremely minimal effort that makes no use of the sophisticated document formatting that HTML allows. Instead, it simply uses the HTML &lt;pre&gt; tag to display the results as plain text. Embarrassingly, the HTML generated by ACBLscore does not even make a minimal effort to comply with the HTML standard though it displays in all major browsers due to the nearly universal tolerance for sloppy HTML.</p>

<p>ACBLmerge is a program that generates a richer report, one that makes much better use of the HTML formatting capabilities. It can present each deal next to the results for each board provided an electronic hand record is available. This capability of <em>merging</em> hands and results lends the program its name. Moreover, the program can display double dummy results and HCP totals for each board in a manner similar to the <a href="http://www.dealmaster.com/">Dealmaster Pro</a> recap sheets. Law of Total Tricks (LoTT) calculations and par results are also displayed. A cut-and-paste aid makes it easy to copy hands into e-mail or other documents. Version 1.1.0 introduced popup recap sheets for each pair. Version 1.2.0 introduced support for reading Bridgemate, BridgePad, and BridgeScorer electronic score results, i.e. the contract and opening lead. Version 1.3.0 introduced support for team games, significantly faster double dummy analysis, and the ability to include a summary list of winners in the report.</p>

<p>The HTML output format is detailed in the <a href="ACBLmergeReport.htm">ACBLmerge Report Features</a> document. It is also possible to generate a slight variant of the HTML report customized for the small screen of an iPhone or iPod Touch. Users with those devices are automatically redirected to the customized reported if it is available when accessing the primary report.</p>

<h2>License, supported platforms, and conformance</h2>

<p>ACBLmerge is written in Perl and released under the terms of <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License GPLv3</a>. To compute the double dummy results it uses Bo Haglund&rsquo;s free double dummy solver, <a href="http://privat.bahnhof.se/wb758135/">DDS</a>, also released under the GNU Public License. DDS is a very efficient solver, requiring less than a minute to consider every denomination and seat for a set of 36 hands on a 1.5 GHz Pentium laptop (circa 2004). On a modern quad-core computer the double dummy analysis may take less than 10 seconds. On non-Windows platforms ACBLmerge uses the open source <a href="http://mdbtools.sourceforge.net/">mdbtools</a> package to read Bridgemate, BridgePad, and BridgeScorer files. On Windows and Mac OS X, the LHA format is read using the open source (LGPL) <a href="http://7-zip.org">7-zip</a> program which is bundled with ACBLmerge.</p>

<p>Perl runs on all major operating systems. Double dummy analysis support is provided for Windows and Mac OS X out of the box. On other platforms double dummy analysis requires installing a Linux package or compiling straight C++ code where the latter should be possible on any platform.</p>

<p>ACBLmerge generates clean HTML that validates as HTML 5. The appearance has been verified in Firefox versions 3&ndash;33, Internet Explorer versions 7&ndash;11, Safari 3.1&ndash;5.17, and Google Chrome versions 4-38. All units are font relative which means the output should scale well if user changes the font size, e.g. via Ctrl+ and Ctrl- in Firefox. HTML appearance is controlled using CSS and may be changed by altering the <strong>ACBLmergeCommon.css</strong> and <strong>ACBLmergePairs.css</strong> files.</p>

<p>Send feedback and bug reports to <a href="mailto:software@lajollabridge.com">software@lajollabridge.com</a></p>

<h2>Version history</h2>

<p>For detailed version information see the <strong>Changelog.txt</strong> file. The following is a summary of the major changes in recent versions. Versions before the 1.0.6 release are not shown with the exception of the original release.</p>

<table id="revhist" summary="ACBLmerge version history">
<thead><tr><td>Version</td><td style="width: 12ex">Date</td><td>Major Changes</td></tr></thead>
<tbody>
<tr><td>1.3.5 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge135.zip"><font color="green">&dArr;</font></a></td><td>19-Nov-2014</td>
<td>
Mac OS X is fully supported out of the box (and uses latest DDS 2.7.0 for double dummy calculations).
</td>
</tr>

<tr><td>1.3.4 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge134.zip"><font color="green">&dArr;</font></a></td><td>07-Nov-2014</td>
<td>
Fixed numerous bugs in par calculation. See Changelog for details.<br>
Fixed N-S and E-W flip of asymmetric double dummy results.<br>
Switched to the latest DDS release (2.7.0, 19-Oct-2014).<br>
American Style (<strong>-as</strong> switch) now also applies to popup recap sheets.<br>
Added board number linking from recap sheet back to main reports.<br>
Added preliminary support for Board-a-Match (BAM) events.<br>
Switched to <a href="http://7-zip.org">7-zip</a> to read compressed masterpoint database on Windows.<br>
Bug fixes and miscellaneous cleanup. See Changelog for details.<br>
All HTML output is now HTML 5.
</td>
</tr>

<tr><td>1.3.3 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge133.zip"><font color="green">&dArr;</font></a></td><td>26-Jul-2012</td>
<td>
Fixed LoTT display (regression in 1.3.2 release).<br>
Switched to the latest DDS release (2.2.1, 16-Jul-2012).<br>
</td>
</tr>

<tr><td>1.3.2 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge132.zip"><font color="green">&dArr;</font></a></td><td>23-Jul-2012</td>
<td>
Enhanced data mining support for pair games to include board results, contracts, opening lead, deal, double dummy analysis, par contracts, LoTT and extra trick factor (ETF) calculations.<br>
Now use player numbers in ACBLscore report when available instead of requiring the game file to be supplied for functionality that requires player numbers, e.g. masterpoint tooltip.<br>
Added ability to write hands in Bridge Base LIN format (<strong>-l</strong>, <strong>-linurl</strong> switches).<br>
Bug fixes. See Changelog for details.
</td>
</tr>

<tr><td>1.3.1 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge131.zip"><font color="green">&dArr;</font></a></td><td>19-Jun-2012</td>
<td>
Added basic data mining (<strong>-dm</strong> switch) support for team games.<br>
Cleaned up and improved user and player documentation.<br>
Bug fixes. See Changelog for details.
</td>
</tr>

<tr><td>1.3.0 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge130.zip"><font color="green">&dArr;</font></a></td><td>24-Mar-2012</td>
<td>
Added support for teams games, notably the field strength calculation, face view, and the masterpoint tooltip features.<br>
Added <strong>-w</strong> option to show a summary list of masterpoint winners.<br>
Extended Bridgemate / BridgePad support from Windows to all platforms.<br>
Significantly faster double dummy analysis on Windows.<br>
Added support for &ldquo;old&rdquo; Duplimate format (.bri files)<br>
Added features (<strong>-appdir</strong>, <strong>-cgip</strong>, <strong>-dm</strong> switches) to support better integration with <a href="http://bridgeresults.net">bridgeresults.net</a> website.<br>
Fixed bug in par computation which caused some sacrifices in a lower ranking denomination to be ignored when a sacrifice was found in a higher denomination.<br>
Added <strong>-as</strong> option for American Style scores, e.g. 4&spades; E 5 instead of 4&spades; E +1.<br>
Improved sorting of board results when contracts and/or opening leads are available.
</td>
</tr>

<tr><td>1.2.3 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge123.zip"><font color="green">&dArr;</font></a></td><td>22-May-2011</td>
<td>
Bug fixes. See Changelog for details.
</td>
</tr>

<tr><td>1.2.2 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge122.zip"><font color="green">&dArr;</font></a></td><td>24-Apr-2011</td>
<td>
Bug fixes. See Changelog for details.
</td>
</tr>

<tr><td>1.2.1 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge121.zip"><font color="green">&dArr;</font></a></td><td>25-Mar-2011</td>
<td>
Bug fixes. See Changelog for details.
</td>
</tr>

<tr><td>1.2.0 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge120.zip"><font color="green">&dArr;</font></a></td><td>18-Mar-2011</td>
<td>
Added ability to include contract and opening lead from Bridgemate and BridgePad electronic scoring equipment. See <strong>-b</strong> option.<br>
Added <strong>-fs</strong> option for field strength calculation (average and geometric mean of masterpoint holdings of all players).<br>
Added <strong>-mp</strong> option to show player masterpoint holdings via tooltip when mouse pointer is held over a player name.<br>
Added <strong>-fc</strong> option to show player faces (images) via tooltip when mouse pointer is positioned over a player name.<br>
Added reading and writing of double dummy results from/to PBN files in OptimumResultTable section.<br>
Added Bridgify format to Cut-and-Paste aid to help users who are not given a PBN link or have a broken one because the ACBLmerge user forgot to upload the PBN file.<br>
<font color="blue">Beta testing by David Kopper of Wichita, KS (Thanks!)</font><br>
</td>
</tr>

<tr><td>1.1.3 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge113.zip"><font color="green">&dArr;</font></a></td><td>17-Dec-2010</td>
<td>
Added :crlf Perl I/O layer for proper handling of files with Windows CR LF line termination when running from Unix. Added <strong>-crlf</strong> switch to control line termination of output files.<br>
Default to http://lajollabridge.com/Software/ACBLmerge/ACBLmergeReport.htm for &ldquo;Explanation of Features&rdquo; help link if <strong>-hurl</strong> switch is not specified.<br>
Now only strip path from PDF filename if it is a Windows specific style path; otherwise leave alone anything that could be a valid hyperlink.<br>
Added <strong>-pbnurl</strong> option to link to a PBN file not placed in the same directory as the HTML file on a web server.
</td>
</tr>

<tr><td>1.1.2 &nbsp;<a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge112.zip"><font color="green">&dArr;</font></a></td><td>16-Apr-2010</td>
<td>
Fixed numerous problems with popup recap sheets generated for Howell (one winner) movements by correcting JavaScript code.<br>
</td>
</tr>

<tr><td>1.1.1</td><td>13-Apr-2010</td>
<td>
Fixed bugs introduced in version 1.1.0 when multiple CPUs are used to perform double dummy analysis.<br>
</td>
</tr>

<tr><td>1.1.0</td><td>07-Apr-2010</td>
<td>
Added popup recap sheets for each pair.<br>
Fixed iPhone/iPod specific HTML output when player numbers are not present in ACBLscore output.<br>
Fixed &ldquo;Jump directly to board&rdquo; links which broke in IE 8 due to a Microsoft issue.<br>    
Added option to show a table marker (green square) in center of each deal.<br>
Added ability to inject custom HTML in the &lt;head&gt; element and at start and end of the &lt;body&gt; element.<br>
Placed CSS and JavaScript in separate files (previously embedded in Perl code).<br>
</td>
</tr>

<tr><td>1.0.8</td><td>04-May-2009</td>
<td>
Added ability to use multiple CPUs / cores for faster double dummy analysis.<br>
Added code to automatically redirect iPhone / iPod users to iPhone / iPod customized HTML output.<br>
</td>
</tr>

<tr><td>1.0.7</td><td>11-Apr-2010</td>
<td>
Mostly bug fixes<br>
</td>
</tr>

<tr><td>1.0.6</td><td>07-Apr-2009</td>
<td>
Added iPhone / iPod customized HTML output.<br>
</td>
</tr>

<tr><td>1.0.1</td><td>25-Sep-2008</td>
<td>
Original release.<br>
</td>
</tr>

</tbody>
</table>

<h2>Obtaining the software</h2>

<p><strong>ACBLmerge.pl</strong> can be downloaded as a <a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge135.zip">zip</a> (for Windows) or <a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmerge135.tar.gz">gzipped tar</a> (for Unix) archive. Older versions which have a green arrow <font color="green">&dArr;</font> at the right of the version number (above) can be downloaded by clicking on the green arrow.</p>

<p>The current program archive contains the files listed in the table below.</p>

<table id="filelist" class="center" summary="ACBLmerge file list">
<thead><tr><td>Filename</td><td>Purpose</td></tr></thead>
<tbody>
<tr class="newgroup"><td><span class="requiredfile">ACBLmerge.pl</span></td><td>Application file (PERL script)</td></tr>
<tr><td><span class="requiredfile">ACBLmergeCommon.js</span></td><td>Application support file (JavaScript)</td></tr>
<tr><td><span class="requiredfile">ACBLmergePairs.js</span></td><td>Application support file (JavaScript)</td></tr>
<tr><td><span class="requiredfile">ACBLmergeCommon.css</span></td><td>Application support file (CSS)</td></tr>
<tr><td><span class="requiredfile">ACBLmergePairs.css</span></td><td>Application support file (CSS)</td></tr>
<tr><td><span class="requiredfile">ddsolver.exe</span></td><td>Double dummy solver (executable)</td></tr>
<tr><td><span class="requiredfile">dds.dll</span></td><td>Bo Haglund&rsquo;s double dummy solver (DLL)</td></tr>
<tr><td><span class="requiredfile">7z.exe</span></td><td>7-zip archive (Version 9.2.0, 32-bit executable)</td></tr>
<tr><td><span class="requiredfile">7z.dll</span></td><td>7-zip archive (Version 9.2.0, 32-bit DLL)</td></tr>
<tr><td><span class="requiredfile">mac-os-x (folder)</span></td><td style="width: 24em">Folder of Mac OS X specific executables (ddsolver, mdb-export, 7z, 7z.so), necessary dynamic link libraries (lib*), and files included for completeness (mdb-schema, mdb-tables, dds.a)</td></tr>
<tr class="newgroup"><td>ACBLmergeAbout.htm</td><td>Documentation for ACBLmerge user</td></tr>
<tr><td>ACBLmergeLogo.png</td><td>Documentation for ACBLmerge user (support file)</td></tr>
<tr><td>download.png</td><td>Documentation for ACBLmerge user (support file)</td></tr>
<tr class="newgroup"><td>ACBLmergeReport.htm</td><td>Documentation for bridge players</td></tr>
<tr><td>ACBLmergeReport.png</td><td>Documentation for bridge players (support file)</td></tr>
<tr class="newgroup"><td>Changelog.txt</td><td>Detailed revision history</td></tr>
<tr><td>facejson.pl</td><td>Server side support file for face view feature</td></tr>
<tr class="newgroup"><td>ddsolver.cpp</td><td>C++ source code for ddsolver.exe / ddsolver</td></tr>
<tr><td>dll.h</td><td>C++ header file for compilation of ddsolver.cpp</td></tr>
<tr class="newgroup"><td>ACBLgamedump.pl</td><td>Auxiliary Perl program (utility)</td></tr>
<tr><td>ACBLgamedecode.pm</td><td>Auxiliary Perl package (utility)</td></tr>
</tbody>
</table>

<p>The nine files marked in blue are required to use the full functionality of the application. The <strong>mac-os-x</strong> folder (also in blue) is required for full functionality on Mac OS X. The second group of files is the documentation for running ACBLmerge, i.e. what you are reading now.</p>

<p>The <strong>ACBLmergeReport.png</strong> and <strong>ACBLmergeLogo.png</strong> files explain the ACBLmerge reporting features to bridge players. By default the &ldquo;Explanation of Features&rdquo; link in each HTML file created ACBLmerge will point to the copy of these files on the La Jolla Unit website. However, if you wish to keep users on your website, place these two files on your website in the same folder, and link to your website&rsquo;s copy of <strong>ACBLmergeReport.htm</strong> from each ACBLmerge generated webpage using the <strong>-hurl</strong> command line option.</p>

<p>Programmers can learn more about the last two files from the <a href="http://lajollabridge.com/Software/ACBLgamedump/ACBLgamedump-About.htm">ACBLgamedump documentation</a>. These files are not needed to run the current version of ACBLmerge but are closely tied to its future development.</p>

<h2>Setting up the software</h2>

<p>On Windows you will need to install the no cost open source Perl interpreter. <a href="http://www.activestate.com/">ActiveState</a> has a good Perl distribution which you can <a href="http://www.activestate.com/activeperl/downloads">download</a> from their web site. Just double click on the installer (.msi) file and choose the default options. <a href="http://strawberryperl.com/">Strawberry Perl</a> is a popular alternative. Perl has been included on Apple computers since Max OS X. Some Unix and Linux distributions have Perl pre-installed.</p>

<ol>
<li>Install Perl.<br>

<p>Skip this step on Mac OS X.</p>

<div class="boxed"><p style="margin: 1ex"><strong>Important:</strong> If you have a 64-bit version of Windows, which is common for Vista and Windows 7, you can install either a 32-bit or 64-bit version of Perl. But if you are planning to incorporate results from the Bridgemate, BridgePad, or BridgeScorer system, choose the 32-bit version of Perl. <a href="#Bridgemate">Read more</a>.</p></div>
</li>
<li>Unzip all the files into whatever folder you please.

<p>On Windows, <strong>C:\Perl</strong>, <strong>C:\ACBLmerge</strong>, or <strong>C:\Program Files\ACBLmerge</strong>, or your <strong>My Documents</strong> folder would all be fine. Windows Vista and Windows 7 make it hard to write directly to <strong>C:\Program Files</strong> so you may not want to use the <strong>C:\Program Files\ACBLmerge</strong> location.</p>

<p>Strictly speaking, only the files colored blue in the table above are required. But no harm will come from simply copying all the files in the archive.</p>

<p>On Mac OS X, you can double click on archive which will normally have been downloaded into your user <strong>Downloads</strong> folder. This will expand everything into the folder <strong>~/Downloads/ACBLmerge</strong>.

</li>

<li><strong>If not Windows or Mac OS X:</strong> compile <strong>ddd.exe</strong> or install the <strong>dds</strong> Linux package if you want to perform double dummy analysis. Then put a copy of the executable in the same directory as <strong>ACBLmerge.pl</strong> or any directory on the search path. <a href="#dds">Read more</a>. On Windows or Mac OS X, the <strong>ddsolver.exe</strong> or ddsolver programs included in the archive will do the double analysis.</li>

<li><p><strong>If not Windows or Mac OS X:</strong> Install the <strong>mdbtools</strong> package if you want to include results from the Bridgemate, BridgePad, or BridgeScorer electronic scoring systems. The exact method to do this will depend on your operating system. On Ubuntu (Debian) use one of the following commands or use the Synaptic package manager.</p>

<table style="margin-left: 2em" cellspacing="10">
<tr><td>apt-get install mdbtools</td> <td><span class="blue">(if running as root)</span></td></tr>
<tr><td>sudo apt-get install mdbtools</td> <td><span class="blue">(if you are allowed to install packages)</span></td></tr>
</table>

<p>See <a href="#Bridgemate">below</a> for additional information.</p>
</li>

</ol>

<p>ACBLmerge only requires the <em>threads</em>, <em>URI</em>, and <em>Config</em> Perl packages for basic operation. These packages have been part of the standard Perl installation since 5.6.0. The <strong>-b</strong>, <strong>-dm</strong>, <strong>-fs</strong>, and <strong>-mp</strong> options require additional Perl packages (DBI, DBD::ODBC, JSON::PP, LWP::UserAgent, Archive::Lha) and their dependencies. The Archive::Lha package is only required when not running on Windows or Mac OS X. Many Perl distributions include some of these packages. If a package is not installed, ACBLmerge will try to install it automatically on Windows when needed by invoking the ActiveState Perl Package Manager (PPM). This has only been tested on Window XP. It should work on Vista or Windows 7 if you are running Perl from an Administrator account, given the file permissions set by the ActiveState Perl installer.</p>

<p>On Unix, you must install the packages yourself &mdash; if you are running Unix you probably know how to do this. I could probably automate the process for Ubuntu (Debian) but I am not sure how general that would be for *NIX. The following command is an example of how to install a Perl package that is available on the Comprehensive Perl Archive Network (<a href="http://search.cpan.org/">CPAN</a>) if you have the <strong>cpan</strong> Unix package installed.</p>

<div style="margin-left: 0.8in;">
cpan -i DBD::ODBC
</div>

<p>Unfortunately, it seems that the author of the Archive::Lha package removed it from CPAN in 2012. To avoid reliance on unsupported code, ACBLmerge 1.3.4 and later bundles the 7-zip archiver and uses it on Windows and Mac OS X to read the LHA format. But on non-Windows platforms, ACBLmerge still requires the Archive::Lha package if masterpoint tooltip or field strength calculations are desired. Old package versions can be downloaded from <a href="http://backpan.perl.org/authors/id/I/IS/ISHIGAKI/">backPAN</a>. The following example starts an interactive <strong>cpan</strong> session and tells it to search backPAN and install the archive:</p>

<div style="margin-left: 0.8in;">
cpan<br>
<span class="blue">cpan[1]&gt;</span> o conf urllist push http://backpan.perl.org/<br>
<span class="blue">cpan[2]&gt;</span> install ISHIGAKI/Archive-Lha-0.06.tar.gz<br>
<span class="blue">cpan[2]&gt;</span> exit
</div>

<p>Note: if <strong>cpan</strong> complains about a missing CHECKSUMS file during the installation and asks whether to proceed, go ahead. If all else fails, here are direct links to the latest (0.06) <a href="http://backpan.perl.org/authors/id/I/IS/ISHIGAKI/Archive-Lha-0.06.tar.gz">package</a> and the <a href="http://backpan.perl.org/authors/id/I/IS/ISHIGAKI/Archive-Lha-0.06.readme">README</a> file.</p>

<h2>Running the software for pair games</h2>

<p>Results from ACBLscore must be available. To get the most out of the program you should also provide an electronic hand record. The ACBLscore results must be saved in the &ldquo;traveler format&rdquo; as a text or HTML file. From within ACBLscore, navigate as follows: Reports (menu) &rarr; Recap/Press (menu) &rarr; Screen/File (LR) &rarr; 8. Press + Recap (traveler format). Alternatively, at the end you can select &rarr; 9. Short Press + Recap (traveler format), a slight variant that does not print out the home city for each player and presents the ranks in a more compact form. An example output filename would be <strong>080914A.txt</strong>. If there are multiple sections, answer yes to the question, &ldquo;Include recap for ALL combined sections?&rdquo; so that pair names and rankings from all sections are included. The output will show the same board results multiple times but that will not affect the ACBLmerge program.</p>

<div class="boxed">
<p style="margin: 1ex"><strong>Important:</strong> ACBLmerge processes a single ACBLscore event. It is written to handle multiple sections in a single event. But if you have multiple events in a game file, you must export each event separately and run ACBLmerge once per event.</p>

<p style="margin: 1ex">Also if your event has multiple sections but ACBLscore does not present the &ldquo;Include recap for ALL combined sections?&rdquo; prompt, then you must export each section separately and process each results file separately. This issue seems to arise for certain (maybe all) STAC games and NAP games. Do not export one section and then try to append the other sections to it; ACBLmerge will not handle that input properly.</p>
</div>

<p>ACBLmerge aims to support output from the current version of ACBLscore. There is no specification for the ACBLscore output and thus the reporting format may change at any time. ACBLmerge may handle older ACBLscore output but testing will be limited. In general club owners should frequently update ACBLscore since masterpoint formulas, allowed event formats, and other details are regularly updated. Check for the <a href="http://www.acbl.org/clubs_page/acblscore/">latest ACBLscore version</a> on the ACBL website.</p>

<p>The hand record information must be in Duplimate (DUP or BRI), Portable Bridge Notation (PBN), or GIB format. If you use Dealmaster Pro to generate the hands, you can save them from Dealmaster Pro in either Duplimate or PBN format. My recommendation is to give the output file the same name but with a different file extension, e.g. <strong>080914A.dup</strong>, <strong>080914A.pbn</strong>, or <strong>080914A.gib</strong>. ACBLmerge can not read Dealmaster Pro PDF files because PDF is a documentation oriented format rather than a data interchange format.</p>

<p>Once you have both files available, start a DOS shell (on Windows) or the shell of your choice (on Unix / Mac). On Windows XP you can start a DOS shell via Start (menu) &rarr; Programs &rarr; Accessories &rarr; Command Prompt; or more simply via Start (menu) &rarr; Run, type <strong>cmd</strong>, and press &lt;enter&gt;. On Windows 7 (and probably Vista), Microsoft has gone to more trouble to hide the &ldquo;scary&rdquo; DOS shell and even the Run Box. See this <a href="http://www.tech-recipes.com/rx/1262/vista_run_box_appear_on_start_menu_shortcut/">explanation</a> of how to get the Run Box to appear.</p>

<p>From the DOS or Unix shell, switch to the directory containing your input files (<strong>cd</strong> = &ldquo;change directory&rdquo;) and then run Perl to invoke ACBLmerge.pl as in the example below:</p>

<blockquote>
cd C:\Documents and Settings\<em>username</em>\My Documents &nbsp;&nbsp;(<span class="blue">typical for XP</span>)<br>
cd C:\Users\<em>username</em>\Documents &nbsp;&nbsp;(<span class="blue">typical for Win7 / Vista</span>)<br><br>
perl ACBLmerge.pl<br>
perl C:\ACBLmerge\ACBLmerge.pl &nbsp;&nbsp;<span class="blue">(if ACBLmerge.pl is in the C:\ACBLmerge folder)</span><br>
perl -S ACBLmerge.pl &nbsp;&nbsp;<span class="blue">(finds ACBLmerge.pl if it is on the system path)</span><br>
</blockquote>

<p>Note: in the last example, the <strong>-S</strong> switch which occurs <em>before</em> ACBLmerge.pl, is a Perl option rather than an ACBLmerge option.</p>

<p>On Mac OS X, start a command line with the Terminal application. If you unzipped the ACBLmerge download in your user <strong>Downloads</strong> folder, try the following:</p>

<blockquote>
cd ~/Downloads/ACBLmerge###  &nbsp;&nbsp;(<span class="blue">where ### is the ACBLmerge version</span>)<br><br>

perl ACBLmerge.pl<br>
</blockquote>

<p>Invoking ACBLmerge without any command arguments will display the full list of available <a href="#proghelp">command line options</a> (switches). There are quite a few options, separated into basic options and &ldquo;advanced&rdquo; options.</p>

<p>Next try something more useful, for example:</p>

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -g -p -o -dd -w
</blockquote>

<p>This will use the Duplimate file <strong>080914A.dup</strong> as the source of the hand records. Since the <strong>-r</strong> switch is missing, the ACBLscore results file will be assumed to be named <strong>080914A.txt</strong> and to exist in the same directory as the <strong>080914A.dup</strong> file. The <strong>-o</strong> switch will set the HTML output to default to <strong>080914A.htm</strong>. The <strong>-p</strong> and <strong>-g</strong> switches will cause the PBN and GIB output to be generated as <strong>080914A.pbn</strong> and <strong>080914A.gib</strong> respectively and links will be included in the HTML output to the PBN and GIB files on the expectation that they will be placed on your website in the same location as your HTML output. The <strong>-dd </strong>switch causes double dummy analysis to be performed. The <strong>-w</strong> includes a summary list of matchpoint winners near the top of the report. The title of the web page will default to &ldquo;Sep 14, 2008 Game Result&rdquo;.</p>

<p>Only the <strong>-h</strong> switch together with a filename or the <strong>-r</strong> switch together with a filename is required. However, you will almost always want the <strong>-o</strong> switch because otherwise the output HTML will be sent to the screen, i.e. STDOUT, instead of a file. Most users will also want the <strong>-dd</strong> switch because the makeable contracts, LoTT calculation, and par contract can only be generated when double dummy results are available.</p>

<p>If you want to specify the various filenames exactly, you could instead use a command like this one below:</p>

<blockquote>perl ACBLmerge.pl -h 080914A.dup -r 080914A.htm -g Sep14.gib -p Sep14.pbn -o Sep14.htm -dd</blockquote>

<p>Notice that this example uses the HTML output from ACBLscore rather than the text output. When the <strong>-r</strong> switch is missing or it is supplied without a filename, ACBLmerge automatically converts the hand filename to a .txt extension, e.g. 080914A.dup &rarr; 080914A.txt, and looks for that file. Here the <span class="inlinecode">-r 080914A.htm</span> is necessary to find the HTML input.</p>

<p>Sometimes you may have a special game such as a Unit game or run multiple sessions or events in the same day. In these cases you may want to set the HTML page title explicitly using the <strong>-t</strong> switch. For example:</p>

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -g -p -o -dd -w -t &quot;Sep 14, 2008 Unit Game&quot;
</blockquote>

<p>This overrides the default of  &quot;Mmm DD, YYYY Game Result&quot;.</p>

<p>If the output HTML filename will have the name as the input file (regardless of case), ACBLmerge will automatically rename the input file, e.g. to <strong>080914A.orig.htm</strong>, to prevent the original file from being clobbered; for example in this case where HTML output from ACBLscore is used:</p>

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -r 080914A.htm -g -p -o -dd -w
</blockquote>

<p>If you have a PDF hand record available, for example from Dealmaster Pro, a link can be added to the PDF file with the <strong>-pdf</strong> switch. Also, separate HTML tailored for the small screen of an Apple iPhone or iPod touch can be generated using the <strong>-iphone</strong> switch, with an output filename like <strong>080914A_iPhone.htm</strong>. When a web user views a page from an iPhone or iPod touch, the user will automatically be redirected to the iPhone customized webpage if it has been generated. After these options are included the first example becomes:</p>

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -g -p -o -dd -w -pdf -iphone
</blockquote>

<p>For any switch which requires a filename to perform its function, you can specify a full (or relative) file path, as is typical for a command line based program. But if you do not specify a filename, ACBLmerge will automatically generate one based on the full filename of either the hand file or the ACBLscore results file by changing the file extension. This can save a lot of typing. The following table lists which filename each switch bases its automatic name generation on and the extension it is changed to.</p>

<table id="fileexts" class="center" summary="ACBLmerge automatic filename generation">
<thead><tr><td>Switch</td><td>Base filename</td><td>New extension</td><td>Use</td></tr></thead>
<tbody>
<tr><td>-r</td><td>Hand filename</td><td>.txt</td><td>Input file</td></tr>
<tr><td>-g</td><td>Hand filename</td><td>.gib</td><td>Input or Output file</td></tr>
<tr><td>-p</td><td>Hand filename</td><td>.pbn</td><td>Input or Output file</td></tr>
<tr><td>-l</td><td>Hand filename</td><td>.lin</td><td>Output file</td></tr>
<tr><td>-pdf</td><td>Hand filename</td><td>.pdf</td><td>Input file</td></tr>
<tr><td>-b</td><td>Results filename</td><td>.bws</td><td>Input file</td></tr>
<tr><td>-o</td><td>Results filename</td><td>.htm</td><td>Output file</td></tr>
<tr><td>-iphone</td><td>Results filename</td><td>.htm</td><td>Output file</td></tr>
<tr><td>-txt</td><td>Results filename</td><td>.txt</td><td>Output file</td></tr>
<tr><td>-dm</td><td>Results filename</td><td>.json</td><td>Output file</td></tr>
<tr><td>-fc</td><td>Results filename</td><td>.ACM/.ACA/.ACE/.ACL<font color="blue">*</font></td><td>Input file</td></tr>
<tr><td>-fs</td><td>Results filename</td><td>.ACM/.ACA/.ACE/.ACL<font color="blue">*</font></td><td>Input file</td></tr>
<tr><td>-mp</td><td>Results filename</td><td>.ACM/.ACA/.ACE/.ACL<font color="blue">*</font></td><td>Input file</td></tr>
</tbody>
</table>

<p>Note that this behavior cascades, i.e. if the <strong>-r</strong> switch is specified without a filename, then all the filenames automatically generated from the Results filename are effectively generated from the Hand filename.</p>

<p><font color="blue">*</font>The treatment of the ACBLscore game file filename is a bit more complex. ACBLscore game files have a different extension depending on the session: morning (.ACM), afternoon (.ACA), evening (.ACE), and late (.ACL). This is a poor programming practice, but ACBLmerge must deal with it. If your Results filename follows the standard naming convention generated by ACBLscore, e.g. <strong>110214<font color="red">A</font>.txt</strong>, ACBLmerge will use the <strong><font color="red">A</font> (or E, M, L)</strong> to automatically generate 110214.AC<strong><font color="red">A</font></strong>. If a valid letter is not found, ACBLmerge will exit with an error. Moreover, if the automatically generated game file is not found in the same directory as the Results file, ACBLmerge will also look in <strong>C:\ACBLSCOR\GAMEFILE</strong>, the ACBLscore&rsquo;s default installation directory, if running on Windows.</p>

<div class="boxed"><p style="margin: 1ex"><strong>Special case:</strong> The <strong>-r</strong> switch is special. Since a results file is necessary to do anything, ACBLmerge will assume the <strong>-r</strong> switch even if you do not specify it and in that case expect to derive a result filename based on the filename supplied to the <strong>-h</strong> switch. Other switches like <strong>-p</strong> and <strong>-g</strong> are optional and therefore will not be assumed.</p></div>

<p>If running on Unix, do not forget that the Unix filesystem is case sensitive. If ACBLmerge is not finding files that you expect it find automatically, check the case of the file extension.</p>

<p>If an electronic hand record is not available but you would still like to take advantage of the other features provided by ACBLmerge, e.g. the list of winners, the pop-up recap sheets, face view (see below), and so forth, you may run ACBLmerge without specifying the <strong>-h</strong> switch. The report will show &ldquo;No hand record&rdquo; where each hand would normally appear. When the <strong>-h</strong> option is not specified the <strong>-r</strong> must be specified because the results filename can not be generated automatically. Also, when the <strong>-h</strong> option is not supplied, the <strong>-p</strong> and <strong>-g</strong> options are meaningless and will be ignored.</p>

<h2 id="Uploading">Uploading ACBLmerge output to your website</h2>

<p>Minimally, you need to upload the HTML output to your website. If you have generated the iPhone customized HTML, don&rsquo;t forget to upload that too. If your hand record input was in PBN or GIB format and/or you generated those formats, or the LIN format, using the <strong>-p</strong>, <strong>-g</strong>, or <strong>-l</strong> switches, upload those files too; otherwise you will have broken PBN and/or GIB links near the top of the HTML report. Finally, you should upload the .txt and .pdf files if you used the <strong>-txt</strong> or <strong>-pdf</strong> switches.</p>

<p>It is unnecessary to upload the BRI, DUP, BWS, or ACBLscore game files.</p>

<p><span style="color: blue; font-weight: bold">Important:</span> ACBLmerge assumes that you will be uploading all the files in the <em>same folder on your website</em> regardless of where they were on your filesystem when you ran ACBLmerge. By default ACBLmerge strips the file path from the related files before creating the links. For the GIB, PBN, LIN, and TXT (&ldquo;<span style="color: #808080">View original ACBLscore output</span>&rdquo;) links you can override this behavior with the <strong>-giburl</strong>, <strong>-pbnurl</strong>, <strong>-linurl </strong>and <strong>-txturl</strong> switches respectively to explicitly supply the URL (relative or absolute) of the corresponding GIB, PBN, LIN or TXT file. For the PDF file you can override this behavior by specifying a URL for the <strong>-pdf</strong> switch. In this case, ACBLmerge will not check if the PDF file exists; instead it will simply assume the user is going to place it on the website where indicated.</p>

<h2 id="Bridgemate">Including Bridgemate, BridgePad, or BridgeScorer electronic scoring results</h2>

The <a href="http://www.bridgemate.us">Bridgemate</a>, <a href="http://bridgepadrf.com/">BridgePad</a>, and <a href="http://www.bridge-scorer.us/">Bridge Scorer</a> electronic scoring systems capture the contract and optionally the opening lead. The electronic scoring results are stored in a file with the .bws extension, e.g. <strong>080914A.bws</strong>. The contract and opening lead information can be included in the ACBLmerge report by specifying the BWS file using the <strong>-b</strong> switch, for example:

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -b -g -p -o -dd -t &quot;Sep 14, 2008 Unit Game&quot;
</blockquote>

<p>I have only tested this functionality for Bridgemate devices but other users have reported that it works for BridgePad and Bridge Scorer devices. I would appreciate any feedback on ACBLmerge&rsquo;s behavior with any of these electronic scoring systems. So far as I know, the electronic scoring output format is not documented. However, the file appears to be written in version 3 of the <a href="http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine">Microsoft JET database format</a>, the internal format used by Microsoft Access 97. If you have Microsoft Access, you can change the <strong>.bws</strong> file extension to <strong>.mdb</strong> open it, and poke around. It is straightforward to read the relevant tables using ODBC and the &ldquo;Microsoft Access Driver(*.mdb)&rdquo; that ships with XP, Vista, and Windows 7.</p>

<p>The Microsoft JET database format is very old. Microsoft doesn&rsquo;t want anything to do with it anymore. They would prefer that database applications use their industrial SQL Server database or one of its derivatives such as the <a href="http://en.wikipedia.org/wiki/MSDE">Microsoft SQL Server Data Engine</a> (MSDE), which admittedly are vastly superior to JET. Presumably to push developers in that direction, Microsoft didn&rsquo;t ship a 64-bit version of the JET ODBC driver, i.e. what appears as the &ldquo;Microsoft Access Driver (*.mdb)&rdquo; in the ODBC Data Source Administrator. <span style="color: red">This means that if ACBLmerge is run with a 64-bit version of Perl, it will be unable to read the Bridgemate or BridgePad results.</span> Unfortunately, Microsoft does not make it very clear that the 64-bit drivers are missing. In 64-bit Windows, the 64-bit and 32-bit ODBC connections and drivers are separate, the 64-bit connections being accessible though the standard ODBC control panel and the 32-bit connections being accessible from the 32-bit Windows on Windows (WoW) ODBC control panel (C:\Windows\SysWoW64\odbcad32.exe). But due to a bug detailed in <a href="http://support.microsoft.com/kb/942976">KB 942976</a>, it is easy to be misled into thinking 64-bit support exists for these drivers. ACBLmerge 1.3.4 and later will terminate with an error if the <strong>-b</strong> switch is used while running under a 64-bit Perl interpreter.</p>

<p>Starting with version 1.3.0, ACBLmerge can read the electronic scoring files on non-Windows platforms using the open source <a href="http://mdbtools.sourceforge.net/">mdbtools</a> package. This package is probably not installed by default on your operating system, so you will have to install it manually. In the worst case, you might have to download the source code and compile it yourself.</p>

<p>Although ODBC has been ported to Unix and the mdbtools package provides a rudimentary ODBC driver, this approach adds more complications than are necessary for the functionality that ACBLmerge needs. ACBLmerge simply reads full tables using the <strong>mdb-export</strong> program provided in the mdbtools package.</p>

<div class="boxed"><p style="margin: 1ex"><strong>Note:</strong> mdbtools fails if BWS file is copied before it is closed properly by shutting down the electronic scoring system. When it fails, you will not see contracts in the output. The Windows JET driver is sophisticated enough to handle to read improperly closed BWS files but mdbtools is not.</p></div>

<h2>Summary Table of Masterpoint Winners</h2>

<p>The <strong>-w</strong> switch will add a summary table of masterpoint winners near the top of the report. Currently this functionality is only implemented for pairs games. If there are 10 or fewer winners, the results are shown in single column; otherwise the results are shown in a two column format using a smaller font. For the iPhone display the table is always shown as single column.</p>

<p>When displaying the winners for any session other than the final session of a multi-session event, a message is included to indicate that the masterpoint awards are not final.</p>

<h2>American Style Scoring</h2>

<p>By default, ACBLmerge displays contract results relative to the contract, e.g. 4&spades; E +1, for a four spade contract making an overtrick, a format some call European scoring. The <strong>-as</strong> switch presents the result American style, e.g. 4&spades; E 5.</p>

<h2>Decorative Features</h2>

<p>The <strong>-tm</strong> (<em>table marker</em>) switch adds a green marker to the center of each deal. This is purely decorative. Long heart or diamond suits in the West hand will overlap the table marker. Although this could be avoided by widening the hand layout area, it seems preferable to conserve screen real estate for the board results.</p>

<h2>BridgeBase LIN file output</h2>

<p>The <strong>-l</strong> switch write the hand records in the BridgeBase LIN format. The LIN format is not fully documented but the output generated by ACBLmerge seems to work in both the Windows BridgeBase program and the online <a href="http://www.bridgebase.com/help/v2help/handviewer.html">BridgeBase Handviewer</a>. However to use the BridgeBase Handviewer, it is necessary to wrap &lt;lin&gt; and &lt;/lin&gt; tags around the start and end of the LIN output and rename the file extension from .lin &rarr; .xml. Then it can be referred to using the <span class="inlinecode">linurl</span> parameter as in the example below.</p>

<blockquote>
<a href="http://www.bridgebase.com/tools/handviewer.html?linurl=http://lajollabridge.com/Software/ACBLmerge/linsample.xml">http://www.bridgebase.com/tools/handviewer.html?linurl=http://lajollabridge.com/Software/ACBLmerge/linsample.xml</a>
</blockquote>

<p>This is explained in the section &ldquo;Loading an external .lin file through a parameter&rdquo; of the Handviewer documentation.</p>

<p>If a hand records has been supplied and double dummy analysis has been chosen, ACBLmerge writes the par contract for each board. Often this is not the most realistic contract. For example, you may see 5N listed when the most likely contract would be 3N+2. Worse you may see low percentage contracts that happen to make double dummy or even less likely sacrifices against low percentage or unbiddable games and slams. As always, double dummy results must be taken with a healthy dose of skepticism and par contracts with even more skepticism.</p>

<h2>Taking Advantage of Multiple CPUs/Cores</h2>

<p>ACBLmerge 1.3.0 and later will automatically use all CPUs/cores when performing double dummy analysis on Windows or Mac OS X computers with multiple CPUs or multiple cores on one or more CPUs, e.g. an Intel Core 2 Duo computer.</p>

<p>On Unix, ACBLmerge does not know how to determine the number of cores. The <strong>-c</strong> option must be specified in order to use multiple cores. The following command line example (<strong>-c 4</strong>) is for a quad core computer.</p>

<blockquote>perl ACBLmerge.pl -h 080914A.dup -r 080914A.htm -g Sep14.gib -p Sep14.pbn -o Sep14.htm -dd -t &quot;Sep 14, 2008 Unit Game&quot; -c 4</blockquote>

<h2>Reusing Double-Dummy Analysis for Multiple Events</h2>

<p>Double dummy results will be written to the output PBN and GIB files when the <strong>-p</strong> or <strong>-g</strong> switches respectively are specified if requested (<strong>-dd</strong> switch). The <strong>-dd</strong> switch will not recompute double dummy results if they are available for every board in the input PBN or GIB file. When several games are played with the same set of hands, the double dummy results may be reused from the PBN or GIB file to very quickly generate results for other games. This is particularly useful for Sectional, Regional, and National tournaments, but relevant even to large clubs running multiple games simultaneously. An example is shown below.</p>

<blockquote>
perl ACBLmerge.pl -h 090409A.dup -r 090409A_open.txt -g -p -o -dd -pdf -iphone -t &quot;Thu Afternoon Open Pairs&quot; -pbnevt &quot;Thu Afternoon Pairs&quot;
</blockquote>

<blockquote>
perl ACBLmerge.pl -h 090409A.gib -r 090409A_299er.txt -g -p -o -dd -pdf -iphone -t &quot;Thu Afternoon 299er Pairs&quot; -pbnevt &quot;Thu Afternoon Pairs&quot;
</blockquote>

<p>Here the results files are explicitly given as <strong>090409A_open.txt</strong> and <strong>090409A_299er.txt</strong> because there is a separate result from each game even though they use the same set of hands stored in <strong>090409A.dup</strong>. In the second command, <strong>090409A.gib</strong>, generated by the first command, is used instead of <strong>090409A.dup</strong> to avoid the need to recompute the double dummy results (the <strong>-dd</strong> switch is still necessary to have the double dummy results included in the HTML output).</p>

<p>Also note the use of the <strong>-pbnevt</strong> switch. Normally the Event information recorded in the PBN file, e.g. <font color="blue">[Event &quot;Friday Morning Open Pairs&quot;]</font>, is automatically taken from the <strong>Event&gt;</strong> field of the ACBLscore report. But in the case where multiple events use the same boards, it is preferable to override this behavior, e.g. setting it to &quot;Friday Morning Pairs&quot;, dropping &quot;Open&quot; since the boards apply to all morning events. Though not essential, this practice is more accurate, avoiding potential confusion when say a player looking at the PBN file linked from the 299er pairs sees &quot;Open Pairs&quot; in the PBN file.</p>

<p>Note: Dealmaster Pro stores double dummy results to PBN or GIB files when asked to perform double dummy calculations. However, in its default mode, it only computes double dummy results for &ldquo;likely&rdquo; contracts and writes partially erroneous double dummy information. ACBLmerge will detect this situation and recompute the double dummy results. If you have used the <strong>-p</strong> and/or <strong>-g</strong> switch, you can avoid this a second time by feeding the PBN or GIB file created by ACBLmerge into the next event that uses the same hands.</p>

<h2 id="fieldstrength">Computing the field strength and displaying masterpoint totals</h2>

<p>The <strong>-fs</strong> switch will compute the field strength in two ways, as the average of each player&rsquo;s masterpoint total and as the geometric mean of each player&rsquo;s masterpoint total. In a geometric mean, the mean is taken in a logarithmic manner. For example, the geometric mean of two players with 10 and 1000 MP respectively is 100 MP, rather than 505 MP. Less experienced players drag down the geometric mean more than the arithmetic mean. A field with a high geometric mean should in principle be uniformly tough and offer few gifts. I have <a href="http://www.lajollabridge.com/Articles/MasterpointNotes.htm#SDregional2010">argued</a> that geometric mean is probably more meaningful, at least for the distribution of players at tournaments.</p>

<p>The <strong>-mp</strong> switch adds a &ldquo;tooltip&rdquo; display of each player&rsquo;s approximate masterpoint total when the mouse pointer is held over the player&rsquo;s name at the top section of the HTML report.</p>

<p>Both the <strong>-fs</strong> and <strong>-mp</strong> switches require an ACBLscore game file in order to read the player numbers unless the ACBLscore report includes the player numbers. If a game filename is not specified, ACBLmerge will automatically generate a filename based on the results filename. For example, if the results file is <strong>110214<font color="red">A</font>.txt</strong>, ACBLmerge will use the <strong><font color="red">A</font> (or E, M, L)</strong> to automatically generate 110214.AC<strong><font color="red">A</font></strong>. If the automatically generated game file is not found in the same directory as the Results file and you are running on Windows, ACBLmerge will also look in <strong>C:\ACBLSCOR\GAMEFILE</strong>, ACBLscore&rsquo;s default installation directory.</p>

<p>Note: I haven&rsquo;t figure out whether the inclusion of player number in ACBLscore reports is controlled by an ACBLscore setting or only happens when older versions of ACBLscore are used. It seems like ACBLscore reports frequently included player numbers until sometime in 2009.</p> 

<p>The <strong>-fs</strong> and <strong>-mp</strong> switches require the <a href="http://www.acbl.org/clubs_page/acblscore/update-club-database/">ACBL Club Update</a> database. If you are connected to the internet, ACBLmerge will automatically download the file. It will also automatically download an update if you have a previous month&rsquo;s database and are running ACBLmerge after the 10th of the month (updates usually appear on the 7th of the month). If you already have an older copy of the database and ACBLmerge is unable to download an update, it will use the older copy.</p>

<h2>Face View</h2>

<p>The <strong>-fc</strong> switch adds a &ldquo;tooltip&rdquo; image for each player for whom there is an image stored on your web server. This is intended to show faces though any image can be used. The <strong>-fc</strong> switch may be used in conjunction with the <strong>-mp</strong> switch. The <strong>-fc</strong> switch requires an ACBLscore game file in order to read the player numbers since the player numbers are used as the retrieve the images from your server. The advantage of using player numbers rather than names is that they are unique and permanent for ACBL members.</p>

In order to support face view, you must perform several steps on your web server.

<ol>
<li>Create a folder on your server for the player images. The recommended location is <strong>/images/faces</strong></li>
<li><p>Upload player images in the JPEG image format where the filename matches the player&rsquo;s all numeric ACBL player numbers, e.g. <strong>1182730.jpg</strong>. To convert a life master&rsquo;s player number to an all numeric player number change J &rarr; 1, K &rarr; 2, etc. A reference table is provided below. If your web server is configured to be case sensitive, be sure to use a lowercase <strong>.jpg</strong> file extension. Do not use <strong>.jpeg</strong>.</p>

<table id="letter2num" class="center" summary="ACBLmerge file list">
<tbody>
<tr><td>J</td><td>&rarr;</td><td style="padding-right: 2em;">1</td> <td>M</td><td>&rarr;</td><td style="padding-right: 2em;">4</td> <td>P</td><td>&rarr;</td><td>7</td></tr>
<tr><td>K</td><td>&rarr;</td><td>2</td> <td>N</td><td>&rarr;</td><td>5</td> <td>Q</td><td>&rarr;</td><td>8</td></tr>
<tr><td>L</td><td>&rarr;</td><td>3</td> <td>O</td><td>&rarr;</td><td>6</td> <td>R</td><td>&rarr;</td><td>9</td></tr>
</tbody>
</table>

<p>The images may be any size and do not all need to be the same size. My recommendation is to use roughly 150 x 150 pixel images so they contain good detail but still load quickly from your server. For headshots, I&rsquo;ve found a 4:5 aspect ratio works well, so most of my images wind up being 150 pixels high and 120 wide. If you do not want to pay for a professional tool like Adobe Photoshop, I highly recommend the free <a href="http://www.getpaint.net/">Paint.NET</a> program for cropping, resizing, and other image adjustment.</p>

<p>You may add or delete images from the server folder at any time without performing any extra steps. Also the folder may contain other images or files if desired (e.g. an alternative image); the ACBLmerge software will only look for those matching #######.jpg, ignoring all others.</p>
</li>

<li>If you use a folder other than /images/faces, edit <strong>facejson.pl</strong>, changing the value of <strong>my $FACE_DIR</strong>. It is also possible that you will have to hard code the value of <strong>my $INTERNAL_FACE_DIR</strong> instead of using the value derived from <strong>$FACE_DIR</strong>.</li>

<li>Upload <strong>facejson.pl</strong> to /cgi-bin on your server. Make sure it is executable by your web server, e.g. on a Unix based web server, you probably want to run <strong>chmod 744 facejson.pl</strong></li>

<li><p>Test <strong>facejson.pl</strong> by typing <font color="blue">http://<em>yourdomain</em>/cgi-bin/facejson.pl</font> in your web browser. If you do this in Google Chrome or Safari, you should see something like the following where the player numbers are sorted:</p>

<blockquote>[ &quot;/images/faces/&quot;, [ 1015621, 1137379, &hellip; ] ]</blockquote>

<p>If you do this in Internet Explorer, you will be prompted to download the data to a file and the file data should look like the above, but without any spaces. Firefox will behave similarly unless you have the <a href="https://addons.mozilla.org/en-US/firefox/addon/jsonview/">JSONView</a> Add-on installed in which case it will behave like Chrome and Safari.</p>

</li>
</ol>

<p>When face view is selected, the JavaScript embedded in the ACBLmerge output makes an initial <a href="http://www.json.org/">JSON</a> request to the server to obtain the location of the player image folder and a list of ACBL player numbers for players with images. This technique eliminates requests for player images that do not exist on your server and avoids unnecessary 404 errors in your web server error logs.</p>

<p>If your web server does not support Perl or you wish to use an alternative server side solution such as PHP, you must recode the simple functionality provided by <strong>facejson.pl</strong> in the language of your choice and then change <strong>var FACEJSON</strong> in <strong>ACBLmergeCommon.js</strong> to your alternate JSON provider. <font color="blue">Important:</font> the player numbers must be sorted in your JSON output because the client side JavaScript uses a binary search to maintain good performance even when there are a large number of available images.</p>

<h2>Running the software for team games</h2>

<p>Most team games are shuffle-deal-and-play. This means hand records are usually not available for teams games. Nevertheless, the field strength, masterpoint tooltip, and face view options are still applicable. And simply converting the non-standard HTML generated by ACBLscore into standards compliant HTML is useful. Therefore, ACBLmerge supports a subset of the pairs functionality.</p>

<p>Save the team results from ACBLscore in the &ldquo;Press + Recap&rdquo; format as a text or HTML file. From within ACBLscore, navigate as follows: Reports (menu) &rarr; Recap/Press (menu) &rarr; Screen/File (LR) &rarr; 3. Press + Recap. If prompted whether to &ldquo;Include Cities and States&rdquo; choose Yes or No as you prefer.</p>

<p>Note that some team games are saved in ACBLscore files with the .ACB file extension. To load these files into ACBLscore, the program must be in Tournament Mode. In Tournament Mode the (B)oth option will be included at the bottom of the dialog your see after File (menu) &rarr; Open as part of the &ldquo;(M)orning, (A)fternoon, (E)vening, (L)ate, (B)oth&rdquo; message. You can switch between Tournament Mode and Club Mode via Configuration (menu) &rarr; Tournament Mode / Club Mode.</p>

<p>Basic operation is as simple as:</p>

<blockquote>perl ACBLmerge.pl -r 080914_swiss.txt -o</blockquote>

<p>The output filename will automatically be named <strong>080914_swiss.htm</strong>. Unlike the HTML generated by ACBLscore, the ACBLmerge HTML output will be standards compliant. Since no title is specified, the title for the HTML document will automatically be generated based on the event date and event name, e.g. &ldquo;May 29, 2011 Sun Strat Swiss Teams&rdquo;.</p>

<p>If you want to include the field strength color bar, masterpoint tooltip, and face view, add those options:</p>

<blockquote>perl ACBLmerge.pl -r 080914_swiss.txt -o -fs -mp -fc</blockquote>

<p>If hand records are available you may use the <strong>-h</strong>, <strong>-p</strong>, <strong>-g</strong>, and <strong>-pdf</strong> options as you would for pairs results. These will create links at the top of the HTML output to the relevant files but no hand diagrams will be included in the main HTML file. Double dummy analysis may be invoked with the <strong>-dd</strong> option. The double dummy results will be included in the PBN and/or GIB output files.</p>

<p>For team games there is no support for Bridgemate / BridgePad data. Therefore, the <strong>-b</strong> option is not applicable.</p>


<h2>Website Integration Features</h2>

<p>In order to integrate ACBLmerge output seamlessly into a sophisticated website you may wish to add a common header image, menubar, footer, or other features. ACBLmerge provides the <strong>-ih</strong> (<em>insert head</em>), <strong>-isb</strong> (<em>insert start body</em>), and <strong>-ieb</strong> (<em>insert end body</em>) switches for inserting content from user supplied files directly into the ACBLmerge HTML output just before the &lt;/head&gt; tag, just after the &lt;body&gt; tag, and just before the &lt;/body&gt; tag respectively. The following code is a simple example that might be included with the <strong>-isb</strong> switch to add a club banner at the top of each results page</p>

<p style="margin-left: 0.5in; margin-right: 0.5in">
&lt;img src=&quot;/images/banner.jpg&quot; width=&quot;800&quot; height=&quot;80&quot; alt=&quot;club banner&quot; /&gt;
</p>

<p>ACBLmerge does not perform any validation on user supplied HTML. Therefore, users should be sure to validate the combined result using a program such as the free <a href="http://totalvalidator.com/">Total Validator</a> or the excellent <a href="http://www.htmlvalidator.com/">CSE HTML Validator</a> which I found very useful for the development of ACBLmerge.</p>

<p>Sophisticated users who wish to alter aspects of the ACBLmerge appearance but do not wish to directly alter the <strong>ACBLmerge.css</strong> file can simply override the CSS as appropriate by using the <strong>-ih</strong> option.</p>

<p>By default the &ldquo;Explanation of Features&rdquo; link at the top of the HTML report will point to the <a href="http://lajollabridge.com/Software/ACBLmerge/ACBLmergeReport.htm">explanation</a> on the La Jolla Unit website. If you want to keep users on your website, place a copy of the <strong>ACBLmergeReport.htm</strong> and <strong>ACBLmergeReport.png</strong> files on your website and use the <strong>-hurl</strong> switch to have ACBLmerge output point to your copy. For example:</p>

<blockquote>
perl ACBLmerge.pl -h 080914A.dup -g -p -o -dd -w -hurl &quot;/ACBLmerge/ACBLmergeReport.htm&quot;
</blockquote>

<p>You can also use the <strong>-nohurl</strong> switch if you do not want a link to the help.</p>

<p>The <strong>-cgip</strong> switch is provided to link player names to a CGI interface. The argument supplied to the switch will be used as the base URL. Either <strong>?pnum=#######</strong> or <strong>?pname=Full Name</strong> will be appended to the base URL to create the hyperlink. For example, <strong>-cgip /res_player.cgi</strong> will create hyperlinks like the following:</p>

<blockquote>
/res_player.cgi?pnum=8535043<br>
/res_player.cgi?pname=Philippe%20Lamoise
</blockquote>

<p>The <strong>?pnum</strong> form containing the player&rsquo;s all numeric ACBL player number will be generated if the player number is available. This requires one of the <strong>-fs</strong>, <strong> -fc</strong>, or <strong>-mp</strong> switches to be specified. Otherwise the <strong>?pname</strong> form with the player&rsquo;s full name will generated. All spaces and special characters will be properly escaped according to CGI standards.</p>

<p>The player links are &ldquo;hovering&rdquo; links that only appear when the mouse pointer is position over the player name. If ordinary &ldquo;permanent&rdquo; links are desired, edit <strong>ACBLmergeCommon.css</strong>, changing <span class="inlinecode">none</span> to <span class="inlinecode">underline</span> in the definition of the <span class="inlinecode">.hoverlink</span> class.</p>

<p>The <strong>-mssurl</strong> switch adds the message &ldquo;View overall rankings for all sections and/or sessions&rdquo; underneath the table of masterpoint winners and links it to the URL specified. Although the awards shown on the final session of a multi-session event are the better of the sum the individual awards from each session and the overall performance across each session, ACBLscore does not show the average percentage across all sessions. This switch can be used to direct players to a web page that does. Similarly when a large event with many sessions is broken into multiple separately combined sections, e.g. JKL and MN, this switch can be used to direct players to a web page that show overall ranking across all sections. Note: this switch does not create such pages; it only allows a link to be created to them.</p>

<p>CGI backends may not provide an environment variable that ACBLmerge can use to generate an application directory. The <strong>-appdir</strong> switch may be used to explicitly define the application directory. See the <a href="#UserAppFolder">User Application Folder</a> section below.</p>

<p>The <strong>-giburl</strong>, <strong>-pbnurl</strong>, <strong>-linurl</strong> and <strong>-txturl</strong> switches allows the URLs for the GIB, PBN, LIN, and TXT files (&ldquo;<span style="color: #808080">View original ACBLscore output</span>&rdquo;) at the top of the report to be explicitly defined. This is useful if the GIB, PBN, or input text files will not be placed in the same directory as the HTML output on the web server. See the <a href="#Uploading">Uploading</a> section.</p>

<h2>Data Mining Output File</h2>

<p>The <strong>-dm</strong> switch creates JSON output containing information about the event and the pairs or teams in the event. This feature was implemented to support functionality on the <a href="http://bridgeresults.net">bridgeresults.net</a> website but may be useful to anyone who does not want to manually parse ACBLscore output with its many slightly different cases.</p>

<p>The top level JSON structure always includes two administrative fields:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Mode</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>creator</td> <td>both</td> <td>Program that created JSON output. ACBLmerge writes &quot;ACBLmerge&quot; followed by its version, e.g. &quot;ACBLmerge 1.3.2&quot;.</td> </tr>
<tr> <td>version</td> <td>both</td> <td>Version of JSON output format. ACBLmerge 1.3.2 creates version 2, with the implicit assumption that earlier output was version 1 although no version field was written previously.</td></tr>
</tbody>
</table>

<p>The top level of the JSON structure always contains an <span class="inlinecode">event</span> field. Depending on the value of <span class="inlinecode">event.gametype</span>, other fields will be present. Pairs and team events contain the <span class="inlinecode">pairs</span> and <span class="inlinecode">teams</span> fields respectively. Team events also contain the <span class="inlinecode">players</span> field. Board-a-Match (BAM) events contain the <span class="inlinecode">teams</span> field but not the <span class="inlinecode">players</span> field.

The following is an sample of the event data. Note: In the actual file, the only white space will be within quoted fields and the order of the fields is arbitrary.</p>

<blockquote>
<div class="inlinecode">
"event":{<br>
<table style="margin-left: 1em; border-spacing: 1em 0em;">
<tr> <td>"gametype":</td> <td>"pairs",</td> </tr>
<tr> <td>"event":</td> <td>"Sunday Afternoon Pairs",</td> </tr>
<tr> <td>"session":</td> <td>"Sunday Aft",</td> </tr>
<tr> <td>"datestr:"</td> <td>"December 28, 2008",</td> </tr>
<tr> <td>"club":</td> <td>"La Jolla Unit",</td> </tr>
<tr> <td>"rating":</td> <td>"Unit Championship",</td> </tr>
<tr> <td>"nstrats:"</td> <td>3,</td> </tr>
<tr> <td>"strats":</td> <td>"ABC",</td> </tr>
<tr> <td>"mplimits":</td> <td>["None", "2500", "500"],</td> </tr>
<tr> <td>"finalAwards":</td> <td>1,</td> </tr>
<tr> <td>"hasPct:</td> <td>1,</td></tr>
<tr> <td>"sections":</td> <td>["A", "C"],</td> </tr>
<tr> <td>"movement":</td> <td>"MITCHELL",</td> </tr>
<tr> <td>"director":</td> <td>"Michael Weber",</td> </tr>
<tr> <td>"clubnum":</td> <td>"146506",</td> </tr>
<tr> <td>"lastmod":</td> <td>"12/28/2008 15:38",</td> </tr>
<tr> <td>"top":</td> <td>"12",</td> </tr>
</table>
}
</div>
</blockquote>

<p>Most of these fields are pulled straight from the ACBLscore file. The fields <span class="inlinecode">gametype</span>, <span class="inlinecode">sections</span>, <span class="inlinecode">finalAwards</span>, <span class="inlinecode">fs</span>, <span class="inlinecode">hasPct</span>, <span class="inlinecode">nstrats</span>, and <span class="inlinecode">strats</span> are derived from other data.</p>

<p>The table below describes all the event fields and whether they appear when ACBLscore is used for a club game or a tournament game, or in both cases.</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Mode</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>boardsPerRound</td> <td>both</td> <td>Number of boards per round. Only present for team games and may be <span class="inlinecode">null</span>.</td> </tr>
<tr> <td>city</td> <td>tourn</td> <td>City that tournament is held in</td> </tr>
<tr> <td>club</td> <td>club</td> <td>Club name</td> </tr>
<tr> <td>clubnum</td> <td>club</td> <td>Club number, e.g. &ldquo;146506&rdquo;. Always six digits.</td> </tr>
<tr> <td>datestr</td> <td>both</td> <td>Date of event in &ldquo;Month DD, YYYY&rdquo; format.</td> </tr>
<tr> <td>director</td> <td>both</td> <td>Director name</td> </tr>
<tr> <td>event</td> <td>both</td> <td>Event name</td> </tr>
<tr> <td>eventcode</td> <td>tourn</td> <td>Numeric event code for type of event. Not yet decoded.</td> </tr>
<tr> <td>finalAwards</td> <td>both</td> <td>1 if the masterpoint awards are final; otherwise 0. This field will be 0 in all sessions except the last of a multi-session event, e.g. a two session Morning and Afternoon pairs events.</td> </tr>
<tr> <td>fs</td> <td>both</td> <td>Field strength data. See follow up table.</td></tr>
<tr> <td>gameformat</td> <td>both</td> <td>Team game format such as &ldquo;VICTORY POINT&rdquo;.</td> </tr>
<tr> <td>gametype</td> <td>both</td> <td>Either &ldquo;pairs&rdquo; &ldquo;teams&rdquo;, or &ldquo;BAM&rdquo;.</td> </tr>
<tr> <td>hasPct</td> <td>both</td> <td>1 if each pair has a percentage; 0 if not, e.g. for an IMP pairs event where percentage is not defined.</td> </tr>
<tr> <td>hasOverallRanks</td> <td>both</td> <td>1 if result has Overall rankings in addition to Section rankings; otherwise 0.</td></tr>
<tr> <td>isMultiSession</td> <td>both</td> <td>1 if the event contains multiple sessions; 0 if not.</td> </tr>
<tr> <td>lastmod</td> <td>both</td> <td>Date and time of last modification may to ACBLscore game file by ACBLscore. Format is &ldquo;MM/DD/YYYY HH:MM&rdquo; in 24-hour format.</td> </tr>
<tr> <td>movement</td> <td>both</td> <td>Player movement. Examples: MITCHELL, HOWELL, ONE WINNER, WEB.</td> </tr>
<tr> <td>mplimits</td> <td>both</td> <td>Array of masterpoint cutoffs for each strat. For an open event the highest strat will be &ldquo;None&rdquo;.</td> </tr>
<tr> <td>nstrats</td> <td>both</td> <td>Number of strats in a stratified event. Set to 1 for a non-stratified event.</td> </tr>
<tr> <td>rating</td> <td>both</td> <td>Masterpoint rating. Examples: &ldquo;Club Masterpoint&rdquo;, &ldquo;Unit Championship&rdquo;, &ldquo;Junior Fund&rdquo;, &ldquo;Club ACBL Membership&rdquo;, &ldquo;STAC&rdquo;, &ldquo;North American Pairs - Unit&rdquo;, &ldquo;Sectional&rdquo;, &ldquo;Regional&rdquo;.</td> </tr>
<tr> <td>sanction</td> <td>tourn</td> <td>Tournament sanction, e.g. &ldquo;R1112022&rdquo; Format is LYYMMDD# where YYMMDD is the start date of the tournament, # distinguishes multiple sanctions issued for the same start date, and L is &ldquo;S&rdquo; for sectionals and &ldquo;R&rdquo; for regionals.</td> </tr>
<tr> <td>sections</td> <td>both</td> <td>Array of section designations sorted alphabetically. Section designations are either a single capital letter or a repeated capital letter. Do not assume that a club running only one game at a time uses section &ldquo;A&rdquo;.</td> </tr>
<tr> <td>session</td> <td>both</td> <td>Name of session. Examples: &ldquo;Morning&rdquo; or &ldquo;Afternoon&rdquo;.</td> </tr>
<tr> <td>strats</td> <td>both</td> <td>Name of strats, one character per strat, e.g. &ldquo;ABC&rdquo;, &ldquo;AX&rdquo;, or &ldquo;DEF&rdquo;. Some events have numerical strats, e.g. the &ldquo;7&rdquo; and &ldquo;3&rdquo; seen in regional Gold Rush pairs. Thus a string like &ldquo;73&rdquo; is not an error.</td></tr>
<tr> <td>top</td> <td>both</td> <td>Score for a top board. Will be <span class="inlinecode">null</span> if hasPct field is 0.</td> </tr>
<tr> <td>tournament</td> <td>tourn</td> <td>Tournament name, e.g. &ldquo;Palm Springs Regional&rdquo;. Beware: this field is not set consistently to the same name for all events in the same tournament. It is better to rely on the Sanction code to test if file are from the same tournament.</td> </tr>
</tbody>
</table>

<p>The field strength fields are given below:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>mean</td> <td>Average masterpoint holding of all players in the field who are ACBL members and for whom masterpoint data is available.</td></tr>
<tr> <td>geomean</td> <td>Geometric mean of masterpoint holdings (as above).</td></tr>
<tr> <td>nData</td> <td>Number of players used to calculate mean and geometric mean.</td></tr>
<tr> <td>nFail</td> <td>Number of ACBL players for whom masterpoint lookup failed.</td></tr>
<tr> <td>nNonMember</td> <td>Number of non-ACBL players.</td></tr>
</tbody>
</table>

<p style="margin-top: 2em">For a pair event, each pair is identified by a <span class="inlinecode">pair_id</span>. The pair_id has the from {section}{num}{dir}, e.g. &ldquo;B12E&rdquo;. The direction is either &ldquo;N&rdquo; for a N-S pair or &ldquo;E&rdquo; for an E-W pair. For Howell movements, the direction component will not be present, e.g. &ldquo;A5&rdquo;.</p>

<p>The possible fields for each pair are given in the table below:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>player1</td> <td>Full name of first player in partnership.</td></tr>
<tr> <td>player2</td> <td>Full name of second player in partnership.</td></tr>
<tr> <td>pnum1</td> <td>All numeric player number of first player in partnership. This field is not present if no player numbers are available. It is <span class="inlinecode">null</span> if an individual player can not be resolved to a player number.</td></tr>
<tr> <td>pnum2</td> <td>All numeric player number of second player in partnership.</td></tr>
<tr> <td>Flt</td> <td>Flight if event is stratified, e.g. &ldquo;A&rdquo;. If the event is not stratified (<span class="inlinecode">nstrats</span> == 1 above), this field will not be present. Flt will always match one of the characters in the <span class="inlinecode">strats</span> event field.</td> </tr>
<tr> <td>Pct</td> <td>Percentage. In a multi-session event, this is the percentage achieved in the session, not the average of all sessions played. If the <span class="inlinecode">strats</span> event field is 0, percentage is not meaningful for the scoring method (e.g. IMP Pairs) and the Pct field will not be present. In this case use the Score field to rank pairs.</td></tr>
<tr> <td>Score</td> <td>Sum of matchpoints or IMPs from all boards played by the pair. This field is most useful for IMP Pairs when the Pct field is not present.</td></tr>
<tr> <td>Carryover</td> <td>Carrover of matchpoints or IMPs from all boards played by the pair in previous session(s).</td></tr>
<tr> <td>Total</td> <td>Total of all matchpoints or IMPs from all boards played by the pair across all sessions in the event.</td></tr>
<tr> <td>Awards</td> <td>Comma separated list of masterpoint awards. Each awards is a number, optionally followed by a space and a pigmentation identifier such as Red, Silver, or Gold. If no pigmentation identifier is given, Black should be assumed. An empty string indicates the pair received no masterpoints. If the <span class="inlinecode">finalAwards</span> event field is 0, the awards should not be included in calculation of a player&rsquo;s total.</td></tr>
<tr> <td>Reason</td> <td>Reason for award, e.g. &ldquo;OB&rdquo; for Overall in B strat. For example, a pair that places 5th overall in A and 1st overall in B will receive whichever award is greater. The Reason field indicates which award was chosen. This field is not available for tournament results (ACBLscore doesn&rsquo;t have enough room to print it).</td></tr>
<tr> <td>Rnk1S</td> <td>Section Rank in highest strat (even if the highest start is not designated as &ldquo;A&rdquo;) if pair received masterpoints; otherwise an empty string. If there is a tie for ranks M-N, the rank will be designated &ldquo;M/N&rdquo;. This field will be provided even for unstratified events.</td></tr>
<tr> <td>Rnk2S</td> <td>Section Rank in 2nd highest strat (provided pair&rsquo;s flight allows them to be ranked in this strat). Field is not provided if the event is unstratified.</td></tr>
<tr> <td>Rnk3S</td> <td>Section Rank in 3rd highest strat (provided pair&rsquo;s flight allows them to be ranked in this strat). Field is not provided if the event does not have three strats.</td></tr>
<tr> <td>Rnk1O</td> <td>Overall Rank in highest strat (as above)</td></tr>
<tr> <td>Rnk2O</td> <td>Overall Rank in 2nd highest strat (as above).</td></tr>
<tr> <td>Rnk3O</td> <td>Overall Rank in 3rd highest strat (as above).</td></tr>
<tr> <td>Adjust</td> <td>Present if there is an adjust due to procedural penalties. If present, the field will be supplied for all pairs in a section but not necessarily all pairs in the event.</td></tr>
<tr> <td>SectTableDir</td> <td>Location of pair in next round of a multi-session event.</td></tr>
</tbody>
</table>

<p>Note: Fields for lower ranking strats will only be present if the event has those strats. Single section events will not have fields for section strats.</p>

<p>Each board is usually identified by a positive integer but indexed as a hash for efficient storage if the boards are not numbered 1-N or some other identification scheme is used. Information about a given board can be accessed via <span class="inlinecode">boards{#}</span> where the possible fields for each board are listed below. The <span class="inlinecode">gibdd</span>, <span class="inlinecode">parNS</span>, <span class="inlinecode">parEW</span>, <span class="inlinecode">parContracts</span>, <span class="inlinecode">totalTricks</span>, and <span class="inlinecode">totalTrumpss</span> fields are only present if a hand record is supplied and double dummy results are calculated (<strong>-dd</strong> switch)</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>deal</td> <td>The deal, in PBN format, e.g. W:KQ9874.954.T63.2 T2.AK.K82.AKQT83 3.QT87.AQJ7.9764 AJ65.J632.954.J5 where spaces separate the hands, periods separate the suits in each hand, T is used for 10, and W: indicates the first hand is West, the remaining hands proceeding clockwise. This field will not be present if a hand record is not supplied or a hand is missing from the supplied hand record.</td></tr>
<tr> <td>gibdd</td> <td>Double dummy analysis for the deal in the compact GIB format, e.g. A9A9<span class="blue">6566</span><span class="red">9897</span><span class="orange">8777</span><span class="green">A9A9</span> where the black, blue, red, orange, green groups respectively are the number of tricks N-S can take in no trump, spade, heart, diamond, and club contracts respectively, when the <em>lead</em> is in each of the four seats. In this hexadecimal notation, A=10, B=11, C=12, and D=13. Each group of four characters is the result when the <em>lead</em> in the South, East, North, and West seats respectively, corresponding to East, North, West, and South respectively as <em>declarer</em> assuming no abnormalities such as a lead out of turn. <span class="blue">Note: This order is <em>counterclockwise</em>, the opposite direction of bidding and play at bridge!</span></td></tr>
<tr> <td>parNS</td> <td>Par result from perspective of N-S assuming N-S bids first.</td></tr>
<tr> <td>parEW</td> <td>Par result from perspective of N-S assuming E-W bids first. This value nearly always matches <span class="inlinecode">par_ns</span>, but in rare cases, for example when each side can make 1N provided it bids it first, the values will be different (90 and -90 in the 1N example).</td></tr>
<tr> <td>parContracts</td> <td>Array of par contracts. Makeable contracts are always at the highest level makeable and include all directions that can make, e.g. &quot;5S-N&quot;, &quot;5S-S&quot;, or &quot;5S-NS&quot;. Sacrifice contract are always doubled and include all seats from which this is the par contract, e.g. &quot;4D*-E-2&quot;, &quot;4D*-W-2&quot;, or &quot;4D*-EW-2&quot;. If neither side can go positive by bidding the par contract is &quot;PASS&quot;. In &ldquo;hot&rdquo; situations where <span class="inlinecode">par_ns</span> and <span class="inlinecode">par_ew</span> are not equal, the list of seats may include seats from both directions, e.g. &quot;1N-NSEW&quot;.</td></tr>
<tr> <td>totalTricks</td> <td>Total number of tricks according to the Law of Total Tricks.</td></tr>
<tr> <td>totalTrumps</td> <td>Total number of trumps according to the Law of Total Tricks.</td></tr>
<tr> <td>results</td> <td>An array of results for the board, one element for each time it was played. Each element in turn contains an array that is detailed in the next table.</td></tr>
</tbody>
</table>

<p>Each individual result array contains the first 5, 10, or 11 elements below depending on whether contract information is available from Bridgemate / BridgePad scoring systems and whether the devices have been set to capture the opening lead.</p>

<table class="json">
<thead>
<tr> <td>Index</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>[0]</td> <td>The score for N-S, e.g. &quot;400&quot; or &quot;-150&quot;. If deal is passed out &quot;0&quot; will be recorded. The score may also be &quot;Ave&quot;, &quot;Ave+&quot;, &quot;Ave-&quot;, or &quot;NP&quot; (Not Played) as the result of director rulings. The E-W score is normally the opposite of the N-S score. In rare cases, the score will contain two values split by a pipe symbol, e.g. &quot;-200|Ave+&quot; This indicates a split score where N-S was assigned -200 and E-W was assigned Ave+. &quot;NP&quot; should only be seen in the context of a split score where one side was the clear offender; if a board was not play due to slowness on the part of both pairs, there will no result to report.</td></tr>
<tr> <td>[1]</td> <td>Matchpoint score for N-S. The percentage can be derived by dividing this number by <span class="inlinecode">event.top</span>.</td></tr>
<tr> <td>[2]</td> <td>Matchpoint score for E-W. Normally this is the same as the N-S matchpoint score subtracted from <span class="inlinecode">event.top</span> but in the case of a split score it can be different.</td></tr>
<tr> <td>[3]</td> <td>N-S pair identifier. This will match a pair identifier used to index the <span class="inlinecode">pairs</span> field, e.g. &quot;K5N&quot;, e.g. N-S pair 5 in section K. Single section events will lack a section identifier. Pair numbers for Howell movements will also lack a direction identifier (N or E) since pairs change direction during Howell movements.</td></tr>
<tr> <td>[4]</td> <td>E-W pair identifier, e.g. &quot;K8E&quot; similar to last field.</td></tr>
<tr> <td>[5]</td> <td>Contract level, i.e. 1-7 or &quot;PASS&quot;.</td></tr>
<tr> <td>[6]</td> <td>Contract denomination: C, D, H, S, or N. If the contract is doubled or redoubled, the denomination will be followed by one or two asterisks respectively, e.g. &quot;S*&quot;. Empty string if hand is passed out.</td></tr>
<tr> <td>[7]</td> <td>Declarer: N, E, S, W. Empty string if hand is passed out.</td></tr>
<tr> <td>[8]</td> <td>Number of tricks taken relative to the contract level, e.g. &quot;-1&quot;, &quot;0&quot;, or &quot;+2&quot;. Empty string if hand is passed out.</td></tr>
<tr> <td>[9]</td> <td><a href="http://tedmuller.us/Bridge/Simulations/Sim002-ExtraTrickFactor.htm">Extra Trick Factor (ETF)</a>. Number of tricks better or worse that declarer achieved relative to the double dummy expectation. Value will be <span class="inlinecode">undefined</span> if no hand record is supplied or the contract is passed out.</td></tr>
<tr> <td>[10]</td> <td>Opening lead, e.g. &quot;H8&quot; If the lead is followed by an equals sign, the card led was in the hand of the opening leader&rsquo;s partner. If the lead is followed by an question mark, the card led was in the hand of one of the opponents. Empty string if hand is passed out.</td></tr>
</tbody>
</table>

<p>Each team is identified by a positive integer. The possible fields for each team are given in the table below:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>players</td> <td>Array of player names. Teams will have at least four players and may have up to six.</td></tr>
</tbody>
</table>

<p>For teams events, player information is reported separately because when a team does has more than four players, the award may be different for different team members depending on how many rounds or sessions the team member played. The possible fields for each player are given in the table below:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>pnum</td> <td>All numeric player number of first player in partnership. This field is not present if no player numbers are available. It is <span class="inlinecode">null</span> if an individual player can not be resolved to a player number.</td></tr>
<tr> <td>Award</td> <td>Comma separated list of masterpoint awards. Each awards is a number, optionally followed by a space and a pigmentation identifier such as Red, Silver, or Gold. If no pigmentation identifier is given, Black should be assumed. An empty string indicates the pair received no masterpoints. If the <span class="inlinecode">finalAwards</span> event field is 0, the awards should not be included in calculation of a player&rsquo;s total.</td></tr>
<tr> <td>Reason</td> <td>Reason for award, e.g. &ldquo;OB&rdquo; for Overall in B strat. For example, a pair that places 5th overall in A and 1st overall in B will receive whichever award is greater. The Reason field indicates which award was chosen.</td></tr>
</tbody>
</table>

<p>Board-a-Match (BAM) events contain a <span class="inlinecode">team</span> field but it more closely resembles the <span class="inlinecode">pairs</span> field above than the <span class="inlinecode">teams</span> field for ordinary teams games. However, the fields <span class="inlinecode">player1</span>, <span class="inlinecode">player2</span>, <span class="inlinecode">pnum1</span>, and <span class="inlinecode">pnum</span> are replaced by two new fields:</p>

<table class="json">
<thead>
<tr> <td>Field</td> <td>Description</td> </tr>
</thead>
<tbody>
<tr> <td>players</td> <td>Array of player names (four to six elements).</td></tr>
<tr> <td>pnums</td> <td>Array of player numbers. Array has same length as <span class="inlinecode">players</span> array and each player number is for the corresponding element in the <span class="inlinecode">players</span> array. A value of <span class="inlinecode">undefined</span> indicates a player without a player number.</td></tr>
</tbody>
</table>

<h2>Line Termination</h2>

<p>ACBLmerge uses the <strong>:crlf</strong> Perl I/O layer to ensure that any input files with Windows style line termination (CR LF) will be correctly handled when running on Unix. By default, output files will be created using the line termination of the OS that the application is run on. However, the <strong>-crlf</strong> option can be used to force the use of Windows style line termination for all text based output files.</p>

<h2 id="UserAppFolder">User Application Folder</h2>

<p>The masterpoint database (see <a href="#fieldstrength">Computing the field strength</a>) and intermediate files used during the double dummy calculation are stored in a per user application specific folder. This ensures the user can create/update these files even if the user only has read permission on the ACBLmerge application folder, the one containing <strong>ACBLmerge.pl</strong> and its support files.</p>

<p>On Windows, the application folder is %APPDATA%\ACBLmerge, e.g. C:\Documents and Settings\<em>username</em>\Application Data\ACBLmerge on Windows XP or C:\Users\<em>username</em>\AppData\Roaming\ACBLmerge on Vista and Windows 7. On other platforms it is ~/.ACBLmerge, a hidden folder in the user&rsquo;s home directory. The home directory is determined by the HOME environment variable.</p>

<p>If the HOME environment variable is not available on a non Windows platform, an application directory may be explicitly defined using the <strong>-appdir</strong> switch. For CGI use, the application directory should remain the same between invocations to prevent repeated downloads of the masterpoint database. Temporarily files are distinguished by the process id ($$ in Perl) and therefore should not collide.</p>

<p>If ACBLmerge can not create the application folder when needed, it will exit with an error.</p>

<h2 id="dds">Double Dummy Analysis Technical Details</h2>

<p>For Windows, Bo Haglund&rsquo;s double dummy solver is provided as a DLL (<strong>dds.dll</strong>). Starting with ACBLmerge 1.3.0, the application uses a new program <strong>ddsolver.exe</strong> on Windows to communicate directly with this DLL. For Mac OS X, <strong>ddsolver</strong> is statically linked to the DDS code. The file <strong>mac-os-x/dds.a</strong> is the static library if you want link your own code against DDS.</p>

<p>Previously, ACBLmerge used a command line based front-end for DDS called the Double Dummy Driver (DDD) written by P.M. Cronje. This was an expedient solution that saved me the effort of learning how to call functions in Windows DLLs. But it was always a kludge because DDD was designed for a more general purpose. As the years rolled by, being tied to DDD became more problematic. DDD was not maintained and I had trouble compiling it with later, more efficient, versions of 1.1.x DDS series. Then Bo Haglund released the 2.x versions of DDS which had support for multiple CPUs / cores built into the solver. Although previous versions of ACBLmerge took advantage of multiple cores by launching separate DDD processes, this approach had the drawback that double dummy analysis had to wait on the completion of slowest of the last few board(s) when some cores were already idle. With the 2.x DDS versions, all cores are engaged simultaneously for each board, eliminating the inefficiency.</p>

<p>Another advantage of communicating directly with the DLL is that users should be able to upgrade to a later version of the double dummy solver simply by replacing the <strong>dds.dll</strong> version shipped with ACBLmerge with one downloaded from Bo Haglund&rsquo;s <a href="http://privat.bahnhof.se/wb758135/">website</a>. Such is the magic of reusable binaries. Note: if you do this, be sure to choose a version that says &ldquo;with PBN&rdquo;.</p>

<p>Unfortunately, DLLs are not portable to non-Windows platforms. So for now other than on Windows and Mac OS X, ACBLmerge still relies on DDD. The easiest way to get a copy of DDD is to install the <strong>dds</strong> Linux package. For example, on Ubuntu (Debian) use one of the following commands or use the Synaptic package manager.</p>

<table style="margin-left: 2em" cellspacing="10">
<tr><td>apt-get install dds</td> <td><span class="blue">(if running as root)</span></td></tr>
<tr><td>sudo apt-get install dds</td> <td><span class="blue">(if you are allowed to install packages)</span></td></tr>
</table>

<p>If you go this route, the package installed executable will be named <strong>dds</strong> instead of <strong>ddd</strong> because <strong>ddd</strong> was already taken by another Linux package, the Data Display Debugger. Just copy <strong>dds</strong> (look in /usr/games) to the directory where ACBLmerge is installed and rename it <strong>ddd.exe</strong>.</p>

<p>Alternatively you can compile DDD. The DDS and DDD source code is straight C++ so it should compile and run under any platform. On Linux and Unix I compile it using the open source GCC  compiler. You can download a gzipped tar file of source code from <a href="http://lajollabridge.com/Software/ACBLmerge/ddd105.tar.gz">here</a>. The start of the file <strong>ddd.cpp</strong> has some notes about compilation. After compilation, rename <strong>ddd</strong> to <strong>ddd.exe</strong> and drop <strong>ddd.exe</strong> into the same directory as the <strong>ACBLmerge.pl</strong> Perl script or into any directory with is on the executable search path. Note: ACBLmerge will always check the folder it is located in for <strong>ddd.exe</strong> whether or not that folder is on the search path before trying the search path.</p>

<p>If you can&rsquo;t install the <strong>ddd</strong> package, can&rsquo;t get it to compile, or are feeling really lazy, you can try the executables provided in the executable subfolder of the gzipped tar in the preceding paragraph. If one works, rename it to <strong>ddd.exe</strong> and proceed as above.</p>



<div class="boxed">
<p style="margin: 1ex"><strong>Note:</strong> If you are using a version of ACBLmerge prior to 1.3.0 on Windows and need a precompiled version of <strong>ddd.exe</strong> you can downloaded it from Bo Haglund&rsquo;s website as a <a href="http://privat.bahnhof.se/wb758135/ddd105.zip">zip</a> file or from the La Jolla bridge website as a <a href="http://lajollabridge.com/Software/ACBLmerge/ddd.zip">zip</a> file. The copy on the La Jolla bridge website is DDS 1.1.9 (2008) linked against DDD 1.0.5 compiled with gcc 3.4.4; it requires the included <strong>cygwin1.dll</strong> file to run unless you already have the Cygwin package installed.</p>
</div>

<h2 id="proghelp">Command Line Help</h2>

<p>Command line arguments in [ ] are optional; for example <span class="inlinecode">[-r [resfname]]</span> means the <strong>-r</strong> switch is optional and that if it is specified, following it with filename is also optional.</p>

<p>To do anything useful, either the <strong>-h</strong> or <strong>-r</strong> switch must be specified along with a filename. Also, you will almost always want the <strong>-o</strong> switch.</p>

<pre style="font-size: 110%">
  Usage: ACBLmerge.pl [-h handfname] [-r [resfname]] [-b [bwsfname]]
  [-o [outfname]] [-g [gibfname]] [-p [pbnfname]] [-l linfname] 
  [-pdf [pdffname]]  [-txt [txtfname]] [-dd] [-t title] [-iphone]
  [-pbnevt event_name] [-hurl URL] [-w] [-tm] [-c #] [-fs [gamefname]]
  [-mp [gamefname]] [-fc [gamefname]] [-v] [-q] [-crlf] [-giburl URL]
  [-pbnurl URL] [-linurl URL] [-txturl URL] [-mssurl URL] [-ih headfname]
  [-isb sbdyfname] [-ieb ebdyname] [-appdir dir] [-cgip URLbase]
  [-dm [dmfname]]  
  
  handfname : Hand record filename (Duplimate, PBN, or GIB format)
  resfname  : ACBLscore results filename. Default extension is .txt
              Can also read HTML files generated by ACBLscore.
  bwsfname  : Bridgemate / BridgePad filename. Default extension is .bws
  outfname  : HTML output filename. If the -o option is not specified,
              output is sent to STDOUT. Default file extension is .htm
  gibfname  : Write hands in Goren in a Box (GIB) library format. If -dd is
              also specified, GIB file will contain the makeable contracts.
              Default file extension is .gib
  pbnfname  : Write hands in Portable Bridge Notation (PBN) format. Default
              file extension is .pbn
  linfname  : Write hands in Bridge Base (LIN) format. Default file
              extension is .lin              
  pdffname  : Specifies filename or URL for PDF hyperlink in output HTML.
              Typically this target would be PDF file produced by Dealmaster
              Pro for printing paper copies of the hand records.
  txtfname  : Specifies filename for plaintext output (sometimes desired if
              original ACBLscore output was in HTML)
  gamefname : ACBLscore game filename. Required for field strength (-fs)
              option, as well as the masterpoint (-mp) and faces (-fc) 
              tooltip display options.
  dmfname   : Specifies filename for data mining JSON.

  To do anything useful, either the -h or -r option must be specified along
  with a filename.  
  
  If a filename is not supplied for any of the -r, -g, -p, -l, or -pdf switches
  the filename is automatically generated by changing the file extension of the
  full filename of the hand record filename, i.e. .dup/.pbn/.gib/.bri --&gt;
  .txt, .gib, .pbn, .lin, or .pdf respectively.
  
  If a filename is not supplied for any of the -b, -txt, -o, -iphone, -dm, -fs,
  or -mp switches, the filename is automatically generated by changing the
  file extension of the full filename of the ACBLscore results filename, i.e.
  .txt/.htm --&gt; .bws, .txt, .htm, .htm, .json, .ACA/.ACE/.ACM/.ACL (last two)
  respectively.  
  
  Options
    -dd     - Include double dummy makes, par contract, and LoTT statistics
    -t      - Specify title of HTML output. If not specified, the title
              defaults to "Mmm DD, YYYY Game Result" where the date is
              derived from the DATE&gt; header of the ACBLscore file.
    -w      - Include list of masterpoint winners at top of output.          
    -iphone - Create additional output HTML file for viewing on the iPhone.
    -pbnevt - Defines Event Name to be used in PBN output. If not specified
              PBN output uses the Event Name from the ACBLscore results file.
    -fs     - Include field strength calculation
    -mp     - Include player masterpoints (hovering tooltip over player names)
    -fc     - Show players faces (hovering toolip over player names)
    -tm     - Include table marker in the center of each hand.
    -as     - Use American Style contract notation, e.g. 2S 9, instead of 2S +1    
    -crlf   - Write Win32 style newlines (CR LF) even when running on Unix.
    -c      - Specify number of CPUs (cores) to use for double dummy analysis.
    -q      - Quiet mode. Do not print any informative messages to STDERR.
    -v      - Print program version on STDERR (overrides -q)

  Advanced Options
    -ih     - Specify file of HTML code to insert in the &lt;head&gt; element of
              the output. Code is added after ACBLmerge &lt;head&gt; content.
    -isb    - Specify file of HTML code insert at the start of the &lt;body&gt;
              element; for example to include a menu bar or banner.
    -ieb    - Specify file of HTML code to insert at the end of the &lt;body&gt;
              element; for example to include contact information.
    -crlf   - Write Win32 style newlines (CR LF) even when running on Unix.    
    -hurl   - Specify URL that explains features of ACBLmerge.pl output
              This is used to create a link at the top of the HTML output.
              Example: -hurl "/software/ACBLmergeReport.htm". Defaults to
              http://lajollabridge.com/Software/ACBLmerge/ACBLmergeReport.htm
              if -hurl is not specified.
    -nohurl - Do not include a help link, not even the default.
    -giburl - Specify URL to GIB file (only required if GIB file will not be
              placed in same directory as HTML output file on the web server)    
    -pbnurl - Specify URL to PBN file (only required if PBN file will not be
              placed in same directory as HTML output file on the web server)
    -linurl   Specify URL to LIN file (only required if LIN file will not be
              placed in same directory as HTML output file on the web server)              
    -txturl - Specify URL to text file (only required if PBN file will not be
              placed in same directory as HTML output file on the web server)
    -mssurl - Specify URL to multiple session / section overall rankings           
    -appdir - Explicitly set application directory
    -cgip   - Specify root of hyperlink for player names in results section  

  Note: for clarity the -ih, -isb, -ieb options have the alternate long
  forms of -ihead, -isbody, and -iebody.

  Produces HTML output that merges bridge hands with ACBLscore text results,
  and optionally the contract and/or opening lead information from the
  Bridgemate or BridgePad electronic scoring systems. Hands may be supplied
  in Duplimate format (.dup/.bri), PBN, or GIB (Goren in a Box) library format.
  The GIB format can store double dummy results. The ACBLscore results need
  to be saved in the "traveler format". From ACBLscore navigate Report (menu)
  --&gt; Recap/Press (menu) --&gt; Screen/File (LR) --&gt; 8. Press + Recap
  (traveler format). Or alternatively 9. Short Press + Recap (traveler format).
  The report may be saved in either text or HTML format.

  The HTML output includes advanced clipboard copy features and the HCP count
  for each board. For each board, the pairs are sorted by N-S matchpoints.
  If double dummy analysis is performed, makeable contracts (+number of tricks
  for every contract), the par contract, and a LoTT calculation will also be
  shown. Hands may also be output in Portable Bridge Notation (PBN) format
  for trick by trick double dummy analysis in programs such as Bridgify and
  the Bridge Captain Double Dummy Solver (both free).

  Example: perl ACBLmerge.pl -h 080914A.dup -r -dd -o -p -w

  The input files are 080914A.dup and 080914A.txt (the ACBLscore filename
  080914A.txt is implicitly assumed here because it is required but was not
  supplied). Likewise, the HTML output will default to 080914A.htm since the
  -o switch has no argument. The -dd switch specifies that double dummy
  analysis will be performed. The PBN output will default to 080914A.pbn.
  No GIB output will be generated since the -g is missing.
  
  Online documentation is located at:
  http://www.lajollabridge.com/Software/ACBLmerge/ACBLmergeAbout.htm
</pre>
  
</div>

</body>
</html>
